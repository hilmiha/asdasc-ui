import{r as m,G,am as y,j as e,c as V,D as W,au as A,av as q,B as z,I as J,an as K,ao as U,P as X,a as _,H as Q}from"./index-CE2XMQiS.js";import{g as w}from"./helper-cZjCkDdV.js";import{I as Y}from"./index-BaLrGujd.js";const Z=(l,r)=>l.map(s=>{const t=r.find(a=>a.id===s);return t?t.txtLabel:s}),ee=(l,r,s,t)=>{let a=[...r];return s&&(a=a.filter(c=>`${c.txtLabel}${c.alias}`.toLowerCase().includes(s.toLowerCase()))),t&&l.length>=t?a.map(c=>l.includes(c.id)?c:{...c,isDisabled:!0}):a},D=(l,r,s,t)=>{s(l,r,t)},se=(l,r)=>{r({isError:!1,errorMessage:""},l)},S=(l,r,s)=>{let t=!1,a="";s.isRequired&&!t&&l.length===0&&(t=!0,a="This field cannot be empty!"),s.maxValue&&!t&&l.length>s.maxValue&&(t=!0,a=`Value selected cannot exceed ${w(`${s.maxValue}`)} items`),s.minValue&&!t&&l.length<s.minValue&&(t=!0,a=`Value must be at least ${w(`${s.minValue}`)} items`),r({isError:t,errorMessage:a},l)},te=(l,r,s,t,a,c,u,j,x,i)=>{let n=[...s];t==="multiple"?s.includes(r.id)?n=n.filter(p=>p!=r.id):n.push(r.id):n=[r.id],u?.maxValue&&n.length>u.maxValue&&(n=[...s]),j&&D(n,r,j,l),i&&x?.isError&&se(n,i),a||c(!0)},O=(l,r)=>{r&&D([],void 0,r,l)},le=(l,r,s,t,a,c,u)=>{l.stopPropagation(),a&&O(l,a),c&&t&&S([],c,t),u?.current&&u.current.focus(),r||s(!0)},ne=({id:l=void 0,className:r=void 0,style:s=void 0,shape:t=void 0,afterElement:a=void 0,beforeElement:c=void 0,type:u="single",txtPlaceholder:j=void 0,option:x=[],value:i=[],isDisabled:n=!1,onChange:p=void 0,error:f=void 0,onValidate:h=void 0,config:o=void 0})=>{const{globalShape:R}=m.useContext(G),[B,E]=m.useState(!1),[N,P]=m.useState(!1),[C,I]=m.useState(""),T=y(()=>Z(i,x),[i,x]),L=y(()=>ee(i,x,C,o?.maxValue),[x,i,C,o?.maxValue]),g=m.useRef(null),$=m.useRef(null),F=y(()=>x.filter(d=>d.type==="option"),[x]);return m.useEffect(()=>{!B&&h&&o&&N&&S(i,h,o)},[JSON.stringify(i)]),e.jsxs("div",{className:V("input-selection-box",{open:B}),children:[e.jsxs("select",{style:{display:"none"},id:l,value:u==="multiple"?i:i.length>0?i[0]:"",multiple:u==="multiple",disabled:!0,children:[e.jsx("option",{value:""}),F.filter(d=>d.type==="option").map(d=>e.jsx("option",{value:d.id,children:d.txtLabel},d.id))]}),e.jsx(W,{className:"input-select-dropdown",isDisabled:n,trigger:(d,k,v,M)=>(M.current&&(g.current=M.current),e.jsxs("div",{ref:d,...k?.()??{},role:"button",tabIndex:n?-1:0,id:l,className:V("input-selection",t||R,{disabled:n,selected:v,error:f?.isError},r),style:s?.triggerButton,onKeyDown:b=>{const H=!b.target.classList.contains("clear-button");(b.keyCode===13||b.keyCode===32)&&H&&(b.preventDefault(),g.current?.click())},children:[o?.prefixElement&&e.jsx("div",{className:"prefix-box",children:o?.prefixElement}),e.jsx("div",{className:"value-label-box",children:i.length>0?e.jsx("p",{className:"value-label",children:T.join(", ")}):e.jsx("span",{className:"placeholder",children:j})}),o?.sufixElement&&e.jsx("div",{className:"sufix-box",children:o?.sufixElement}),i.length>0&&!n&&!o?.isHideClear&&e.jsx(J,{className:"clear-button",icon:e.jsx(K,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:b=>{le(b,N,P,o,p,h,g)}}),n?e.jsx("div",{className:"lock-box",children:e.jsx(U,{className:"global-icon"})}):e.jsx("div",{className:"caret-box",children:v?e.jsx(X,{className:"global-icon"}):e.jsx(_,{className:"global-icon"})})]})),options:L,optionSelected:i,optionSelectedAppearance:"appear-selected",shape:t,style:s?.dropdownMenu,onClick:(d,k,v)=>{n||te(v,k,i,u,N,P,o,p,f,h)},onOpen:()=>{E(!0)},onClose:()=>{E(!1),I(""),N&&h&&o&&S(i,h,o)},elementHeader:e.jsxs(e.Fragment,{children:[o?.isCombobox?e.jsx("div",{className:"search-bar-box",children:e.jsx(Y,{ref:$,type:"text",txtPlaceholder:"Search...",value:C,onChange:d=>{I(d)},config:{prefixElement:e.jsx(q,{className:"global-icon"})}})}):void 0,!o?.isHideClear&&e.jsx("div",{className:"reset-box",children:e.jsx(z,{shape:"box",className:"reset-button",txtLabel:"Clear Selection",appearance:"subtle",onClick:d=>{p&&O(d,p)}})})]}),elementFooter:e.jsx(e.Fragment,{children:C&&L.length===0&&x.length>0&&e.jsxs("div",{className:"empty-box",children:[e.jsx(A,{className:"global-icon",size:32}),e.jsxs("div",{children:[e.jsx("span",{children:"No result."}),e.jsx("span",{children:"Try other search param!"})]})]})}),floatingConfig:{isLockScroll:!0,isContainerWidthSameAsTrigger:!0,isWithCheckmark:u==="multiple",isCloseOnItemClicked:u==="single"}}),c&&e.jsx("div",{className:"before-element-box",children:c}),a&&e.jsx("div",{className:"after-element-box",children:a}),f&&f.isError&&f.errorMessage&&e.jsxs("div",{className:"error-box",children:[e.jsx(Q,{className:"global-icon"}),e.jsx("p",{children:f.errorMessage})]})]})};export{ne as I};
