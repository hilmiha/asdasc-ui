import{r as p,G as y,j as m,c as E,I as P,ak as q,al as A,F as T}from"./index-C5u07D6-.js";import{a as I,g as G}from"./helper-cZjCkDdV.js";import{l as z}from"./index-D6UgoieT.js";const H=e=>{switch(e){case"number":case"number-text":return{type:"numeric",mode:"tel"};case"password":return{type:"password",mode:"text"};default:return{type:"text",mode:"text"}}},f=(e,a)=>a==="number"&&e?G(e):e,O=(e,a)=>{a({isError:!1,errorMessage:""},e)},L=(e,a,i,t)=>{let s=!1,u="";if(t.isRequired&&!s&&(a||(s=!0,u="This field cannot be empty!")),t.minLength&&!s&&e!=="number"&&a.length<t.minLength&&(s=!0,u=`Minimum ${t.minLength} characters required`),t.maxLength&&!s&&e!=="number"&&a.length>t.maxLength&&(s=!0,u=`Maximum ${t.maxLength} characters allowed`),(t.maxValue!==void 0||t.minValue!==void 0)&&!s&&e==="number"){const o=I(a),l=parseInt(o??"0");t.maxValue!==void 0&&t.minValue!==void 0&&(l<t.minValue||l>t.maxValue)?(s=!0,u=`Value is out of range (${f(`${t.minValue}`,"number")} ~ ${f(`${t.maxValue}`,"number")})`):t.maxValue!==void 0&&l>t.maxValue?(s=!0,u=`Value cannot exceed ${f(`${t.maxValue}`,"number")}`):t.minValue!==void 0&&l<t.minValue&&(s=!0,u=`Value must be at least ${f(`${t.minValue}`,"number")}`)}if(t.validRegex&&!s&&e!=="number"){for(const[o,l]of t.validRegex)if(!o.test(a)){s=!0,u=l;break}}i({isError:s,errorMessage:u},a)},W=(e,a,i)=>{const t=h=>h.split("").filter(s).length,s=h=>/[a-zA-Z0-9]/.test(h),u=f(i,"number"),o=f(a,"number"),x=(e.selectionStart??0)-1;if(x>=o.length){const h=u.length;e.setSelectionRange(h,h);return}const c=o.slice(0,x),r=t(c);let n=0,C=0;for(;n<u.length&&(s(u[n])&&C++,!(C>=r+2));n++);requestAnimationFrame(()=>{e.setSelectionRange(n,n)})},X=(e,a,i,t,s,u,o,l,x,c)=>{const r=e.target.value;let n=r;switch(i){case"text-no-space":n=r.replace(/\s/g,"");break;case"number-text":n=r.replace(/[^0-9]/g,"");break;case"number":n=I(r);break;case"text":case"password":default:n=r;break}l?.maxLength&&(n=n.slice(0,l.maxLength)),t(n),o(n,e),c&&x?.isError&&O(n,c),i==="number"&&W(e.target,a,n),s||u(!0)},Z=(e,a,i,t,s,u,o,l,x)=>{let r=e.target.value.trim();i==="number"&&(r=I(r)),a!==r&&(t(r),u(r,e)),l&&s&&o&&L(i,r,l,o),x&&x(e,r)},D=(e,a,i)=>{i&&i(e,a)},J=(e,a,i,t,s,u,o)=>{i(""),t("",e),u&&s&&L(a,"",u,s),o?.current&&o.current.focus()},Y=({ref:e=void 0,id:a=void 0,className:i=void 0,style:t=void 0,shape:s=void 0,afterElement:u=void 0,beforeElement:o=void 0,type:l="text",txtPlaceholder:x=void 0,value:c="",isDisabled:r=!1,onChange:n=void 0,onBlur:C=void 0,onFocus:h=void 0,error:V=void 0,onValidate:j=void 0,config:d=void 0})=>{const{globalShape:R}=p.useContext(y),[M,N]=p.useState(c),[$,w]=p.useState(!1),[B,S]=p.useState(!1),F=p.useMemo(()=>H(l),[l]),v=p.useRef(null);p.useEffect(()=>{e&&v.current&&(typeof e=="function"?e(v.current):e.current!==void 0&&(e.current=v.current))},[e]);const k=p.useCallback(z.debounce((b,g)=>{n&&n(b,g)},500),[n]);return p.useEffect(()=>{c!==M&&!B&&(N(c),j&&d&&L(l,c,j,d))},[c]),m.jsxs("div",{className:E("input-text-box",i),children:[m.jsxs("div",{className:E("input-text-container",s||R,{disabled:r,error:V?.isError}),onClick:()=>{v.current?.focus()},children:[d?.prefixElement&&m.jsx("div",{className:"prefix-box",children:d?.prefixElement}),m.jsx("input",{id:a,ref:v,className:E("input-text"),style:t?.input,placeholder:x,value:f(M,l),onChange:b=>{r||X(b,c,l,N,$,w,k,d,V,j)},onBlur:b=>{r||Z(b,c,l,N,$,k,d,j,C),S(!1)},onFocus:b=>{r||D(b,c,h),S(!0)},disabled:r,type:F.type,inputMode:F.mode}),d?.sufixElement&&m.jsx("div",{className:"sufix-box",children:d?.sufixElement}),c.length>0&&!r&&!d?.isHideClear&&m.jsx(P,{className:"clear-button",icon:m.jsx(q,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:b=>{J(b,l,N,k,d,j,v)}}),r&&m.jsx("div",{className:"lock-box",children:m.jsx(A,{className:"global-icon"})})]}),o&&m.jsx("div",{className:"before-element-box",children:o}),u&&m.jsx("div",{className:"after-element-box",children:u}),V&&V.isError&&V.errorMessage&&m.jsxs("div",{className:"error-box",children:[m.jsx(T,{className:"global-icon"}),m.jsx("p",{children:V.errorMessage})]})]})};export{Y as I};
