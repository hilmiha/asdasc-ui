import{r as N,G as U,$ as K,j as i,F as L,D as X,a0 as _,I as q,a1 as D,a2 as H,U as J,g as z}from"./index-CnHM78Nl.js";import{g as P}from"./helper-D8J10eng.js";import{T as Q}from"./index-QX6N4i8G.js";const T=r=>{setTimeout(()=>{r.current?.click()},100)},Y=(r,a,e,o)=>{if(!r)return[];let n=[...r].filter(l=>!a.includes(l.txtLabel));return e&&(n=n.filter(l=>`${l.txtLabel}${l.alias}`.toLowerCase().includes(e.toLowerCase()))),o?.maxValue&&a.length>=o?.maxValue?n.map(l=>a.includes(l.id)?l:{...l,isDisabled:!0}):n},C=(r,a,e,o)=>{e(r,a,o)},W=(r,a)=>{a({isError:!1,errorMessage:""},r)},E=(r,a,e)=>{let o=!1,n="";e.isRequired&&!o&&r.length===0&&(o=!0,n="This field cannot be empty!"),e.maxValue&&!o&&r.length>e.maxValue&&(o=!0,n=`Value selected cannot exceed ${P(`${e.maxValue}`)} items`),e.minValue&&!o&&r.length<e.minValue&&(o=!0,n=`Value must be at least ${P(`${e.minValue}`)} items`),a({isError:o,errorMessage:n},r)},Z=(r,a,e,o,n,l,u,c,t,s,x)=>{let m=[...e];const g=a.txtLabel;m.includes(g)?m=m.filter(j=>j!=g):m.push(g),c?.maxValue&&m.length>c.maxValue&&(m=[...e]),t&&C(m,g,t,r),x&&s?.isError&&W(m,x),l||u(!0),o(""),n.current?.focus()},ee=(r,a,e,o,n,l,u,c,t,s)=>{const x=r.target.value;let m=x;switch(e){case"text-no-space":m=x.replace(/\s/g,"");break;case"text":default:m=x;break}x===" "?T(a):(m&&!u&&T(a),c(m)),s&&t?.isError&&W(o,s),n||l(!0)},te=(r,a,e,o,n,l,u,c,t,s,x)=>{u.length===0&&o!==""&&(n(""),l&&a.current?.click()),x&&s&&c&&(!l||l&&u.length===0)&&E(e,x,s),t&&t(r,e)},se=(r,a,e)=>{e&&e(r,a)},re=(r,a,e,o,n,l,u,c)=>{const t=r.key;if(t==="Backspace"&&e===""&&n.length>0){const s=[...n];s.pop(),l&&(c&&u?.maxValue&&E(s,c,u),C(s,void 0,l,r))}if(t==="Enter"&&e==="")T(a);else if(t==="Enter"&&e!==""){const s=[...n],x=e.trim();if(!s.includes(x)){s.push(x),c&&u?.maxValue&&E(s,c,u);let m=!0;u?.maxValue&&u?.maxValue<s.length&&(m=!1),l&&m&&C(s,x,l,r)}o("")}},le=(r,a,e,o,n,l,u,c)=>{const t=[...e].filter(s=>s!==a);l&&C(t,void 0,l,r),c&&u&&E(t,c,u),o||n(!0)},ne=(r,a,e,o,n,l,u)=>{n&&C([],void 0,n,r),u&&l&&E([],u,l),a?.current&&a.current.focus(),e||o(!0)},ue=({id:r=void 0,className:a=void 0,shape:e=void 0,afterElement:o=void 0,beforeElement:n=void 0,type:l="text-no-space",txtPlaceholder:u=void 0,options:c=[],value:t=[],isDisabled:s=!1,onChange:x=void 0,onBlur:m=void 0,onFocus:g=void 0,error:j=void 0,onValidate:h=void 0,triggerValidate:F=0,config:d=void 0})=>{const{globalShape:A}=N.useContext(U),[k,S]=N.useState(!1),[O,$]=N.useState(!1),[y,I]=N.useState(""),w=K(()=>Y(c,t,y,d),[c,t,y,d?.maxValue]),G=K(()=>t.map(p=>i.jsx(Q,{className:"input-tag-tag",txtLabel:p,onClickRemove:s?void 0:v=>{le(v,p,t,k,S,x,d,h)},style:{removeButton:{button:{pointerEvents:"all"}},textLabel:{pointerEvents:"all"}},isDisabled:s},p)),[t,s]);N.useEffect(()=>{!O&&h&&d&&k&&E(t,h,d)},[JSON.stringify(t)]),N.useEffect(()=>{F===1&&!O&&h&&d&&E(t,h,d)},[F]);const b=N.useRef(null),[B,M]=N.useState(!1),V=(p,v)=>i.jsxs("div",{className:L("input-tag-container",e||A,{disabled:s,error:j?.isError,selected:B&&w.length>0},a),children:[d?.prefixElement&&i.jsx("div",{className:"prefix-box",children:d?.prefixElement}),i.jsxs("div",{className:"input-tag-input",children:[t.length>0&&G,!s&&i.jsx("input",{...v??{},ref:p,placeholder:u,className:"input-tag",enterKeyHint:"enter",value:y,onChange:f=>{s||ee(f,b,l,t,k,S,B,I,j,h)},onBlur:f=>{s||te(f,b,t,y,I,B,w,k,m,d,h),$(!1)},onFocus:f=>{s||se(f,t,g),$(!0)},onKeyDown:f=>{re(f,b,y,I,t,x,d,h)}})]}),d?.sufixElement&&i.jsx("div",{className:"sufix-box",children:d?.sufixElement}),t.length>0&&!s&&d?.isShowClear&&i.jsx(q,{className:"clear-button",icon:i.jsx(D,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:f=>{ne(f,b,k,S,x,d,h)}}),s?i.jsx("div",{className:"lock-box",children:i.jsx(H,{className:"global-icon"})}):c.length!==0?i.jsx("div",{className:"caret-box",onClick:()=>{b.current?.focus()},children:B?i.jsx(J,{className:"global-icon"}):i.jsx(z,{className:"global-icon"})}):i.jsx(i.Fragment,{})]});return i.jsxs("div",{className:L("input-tag-box"),children:[i.jsxs("select",{style:{display:"none"},id:r,value:t,multiple:!0,disabled:!0,children:[i.jsx("option",{value:""}),t.map(p=>i.jsx("option",{value:p,children:p},p))]}),c.length===0||s?V(b):i.jsx(X,{className:L("input-tag-dropdown"),trigger:(p,v,f,R)=>(R.current&&(b.current=R.current),V(p,{...v?.()??{}})),options:w,optionSelected:t,shape:e,style:{optionButton:{textLabel:{fontWeight:"var(--font-weight-normal)"}},container:{display:w.length===0?"none":void 0}},onClick:(p,v,f)=>{s||Z(f,v,t,I,b,k,S,d,x,j,h)},onOpen:()=>{M(!0)},onClose:()=>{M(!1)},floatingConfig:{isContainerWidthSameAsTrigger:!0,isLockScroll:w.length!==0,isShowDropdown:w.length!==0,mode:["dropdown"]}}),n&&i.jsx("div",{className:"before-element-box",children:n}),o&&i.jsx("div",{className:"after-element-box",children:o}),j&&j.isError&&j.errorMessage&&i.jsxs("div",{className:"error-box",children:[i.jsx(_,{className:"global-icon"}),i.jsx("p",{children:j.errorMessage})]})]})};export{ue as I};
