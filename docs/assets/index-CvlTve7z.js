import{U as i,r as l,j as g,G as ve,E as xe,I as be,a1 as _e}from"./index-BIzDLPgR.js";import{I as M}from"./index-DZiD5Iws.js";import{l as ee}from"./index-C4fA7XK5.js";const F=(e,t)=>{const r=e.toLowerCase().replace("#",""),n=()=>r.split("").map(f=>parseInt(f+f,16));let o,a,s;if(r.length===3)[o,a,s]=n();else{const f=parseInt(r.slice(0,6),16);o=f>>16&255,a=f>>8&255,s=f&255}const c=t&&r.length===8?parseInt(r.slice(6,8),16)/255:1;return{r:o,g:a,b:s,a:c}},j=(e,t)=>{const r=o=>Math.round(o).toString(16).padStart(2,"0");if(!t||e.a===1)return`#${r(e.r)}${r(e.g)}${r(e.b)}`.toUpperCase();const n=Math.round(e.a*255);return`#${r(e.r)}${r(e.g)}${r(e.b)}${r(n)}`.toUpperCase()};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function W(e,t){if(e==null)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(o[r]=e[r]);return o}function K(e){var t=l.useRef(e),r=l.useRef(function(n){t.current&&t.current(n)});return t.current=e,r.current}var $=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e<t?t:e},w=function(e){return"touches"in e},q=function(e){return e&&e.ownerDocument.defaultView||self},te=function(e,t,r){var n=e.getBoundingClientRect(),o=w(t)?function(a,s){for(var c=0;c<a.length;c++)if(a[c].identifier===s)return a[c];return a[0]}(t.touches,r):t;return{left:$((o.pageX-(n.left+q(e).pageXOffset))/n.width),top:$((o.pageY-(n.top+q(e).pageYOffset))/n.height)}},re=function(e){!w(e)&&e.preventDefault()},X=i.memo(function(e){var t=e.onMove,r=e.onKey,n=W(e,["onMove","onKey"]),o=l.useRef(null),a=K(t),s=K(r),c=l.useRef(null),f=l.useRef(!1),u=l.useMemo(function(){var L=function(v){re(v),(w(v)?v.touches.length>0:v.buttons>0)&&o.current?a(te(o.current,v,c.current)):I(!1)},N=function(){return I(!1)};function I(v){var m=f.current,x=q(o.current),E=v?x.addEventListener:x.removeEventListener;E(m?"touchmove":"mousemove",L),E(m?"touchend":"mouseup",N)}return[function(v){var m=v.nativeEvent,x=o.current;if(x&&(re(m),!function(R,O){return O&&!w(R)}(m,f.current)&&x)){if(w(m)){f.current=!0;var E=m.changedTouches||[];E.length&&(c.current=E[0].identifier)}x.focus(),a(te(x,m,c.current)),I(!0)}},function(v){var m=v.which||v.keyCode;m<37||m>40||(v.preventDefault(),s({left:m===39?.05:m===37?-.05:0,top:m===40?.05:m===38?-.05:0}))},I]},[s,a]),d=u[0],C=u[1],S=u[2];return l.useEffect(function(){return S},[S]),i.createElement("div",k({},n,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:o,onKeyDown:C,tabIndex:0,role:"slider"}))}),H=function(e){return e.filter(Boolean).join(" ")},Y=function(e){var t=e.color,r=e.left,n=e.top,o=n===void 0?.5:n,a=H(["react-colorful__pointer",e.className]);return i.createElement("div",{className:a,style:{top:100*o+"%",left:100*r+"%"}},i.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},h=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r},Ce=function(e){return se(U(e))},U=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?h(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?h(parseInt(e.substring(6,8),16)/255,2):1}},Ee=function(e){return ye(ae(e))},oe=function(e){var t=e.s,r=e.v,n=e.a,o=(200-t)*r/100;return{h:h(e.h),s:h(o>0&&o<200?t*r/100/(o<=100?o:200-o)*100:0),l:h(o/2),a:h(n,2)}},P=function(e){var t=oe(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},G=function(e){var t=oe(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},ae=function(e){var t=e.h,r=e.s,n=e.v,o=e.a;t=t/360*6,r/=100,n/=100;var a=Math.floor(t),s=n*(1-r),c=n*(1-(t-a)*r),f=n*(1-(1-t+a)*r),u=a%6;return{r:h(255*[n,c,s,s,f,n][u]),g:h(255*[f,n,n,c,s,s][u]),b:h(255*[s,s,f,n,n,c][u]),a:h(o,2)}},B=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},ye=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,a=o<1?B(h(255*o)):"";return"#"+B(t)+B(r)+B(n)+a},se=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,a=Math.max(t,r,n),s=a-Math.min(t,r,n),c=s?a===t?(r-n)/s:a===r?2+(n-t)/s:4+(t-r)/s:0;return{h:h(60*(c<0?c+6:c)),s:h(a?s/a*100:0),v:h(a/255*100),a:o}},ue=i.memo(function(e){var t=e.hue,r=e.onChange,n=H(["react-colorful__hue",e.className]);return i.createElement("div",{className:n},i.createElement(X,{onMove:function(o){r({h:360*o.left})},onKey:function(o){r({h:$(t+360*o.left,0,360)})},"aria-label":"Hue","aria-valuenow":h(t),"aria-valuemax":"360","aria-valuemin":"0"},i.createElement(Y,{className:"react-colorful__hue-pointer",left:t/360,color:P({h:t,s:100,v:100,a:1})})))}),ce=i.memo(function(e){var t=e.hsva,r=e.onChange,n={backgroundColor:P({h:t.h,s:100,v:100,a:1})};return i.createElement("div",{className:"react-colorful__saturation",style:n},i.createElement(X,{onMove:function(o){r({s:100*o.left,v:100-100*o.top})},onKey:function(o){r({s:$(t.s+100*o.left,0,100),v:$(t.v-100*o.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+h(t.s)+"%, Brightness "+h(t.v)+"%"},i.createElement(Y,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:P(t)})))}),J=function(e,t){if(e===t)return!0;for(var r in e)if(e[r]!==t[r])return!1;return!0},Ne=function(e,t){return e.toLowerCase()===t.toLowerCase()||J(U(e),U(t))};function le(e,t,r){var n=K(r),o=l.useState(function(){return e.toHsva(t)}),a=o[0],s=o[1],c=l.useRef({color:t,hsva:a});l.useEffect(function(){if(!e.equal(t,c.current.color)){var u=e.toHsva(t);c.current={hsva:u,color:t},s(u)}},[t,e]),l.useEffect(function(){var u;J(a,c.current.hsva)||e.equal(u=e.fromHsva(a),c.current.color)||(c.current={hsva:a,color:u},n(u))},[a,e,n]);var f=l.useCallback(function(u){s(function(d){return Object.assign({},d,u)})},[]);return[a,f]}var Ie=typeof window<"u"?l.useLayoutEffect:l.useEffect,je=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},ne=new Map,ie=function(e){Ie(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!ne.has(t)){var r=t.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,ne.set(t,r);var n=je();n&&r.setAttribute("nonce",n),t.head.appendChild(r)}},[])},$e=function(e){var t=e.className,r=e.colorModel,n=e.color,o=n===void 0?r.defaultColor:n,a=e.onChange,s=W(e,["className","colorModel","color","onChange"]),c=l.useRef(null);ie(c);var f=le(r,o,a),u=f[0],d=f[1],C=H(["react-colorful",t]);return i.createElement("div",k({},s,{ref:c,className:C}),i.createElement(ce,{hsva:u,onChange:d}),i.createElement(ue,{hue:u.h,onChange:d,className:"react-colorful__last-control"}))},ke={defaultColor:"000",toHsva:Ce,fromHsva:function(e){return Ee({h:e.h,s:e.s,v:e.v,a:1})},equal:Ne},Me=function(e){return i.createElement($e,k({},e,{colorModel:ke}))},Fe=function(e){var t=e.className,r=e.hsva,n=e.onChange,o={backgroundImage:"linear-gradient(90deg, "+G(Object.assign({},r,{a:0}))+", "+G(Object.assign({},r,{a:1}))+")"},a=H(["react-colorful__alpha",t]),s=h(100*r.a);return i.createElement("div",{className:a},i.createElement("div",{className:"react-colorful__alpha-gradient",style:o}),i.createElement(X,{onMove:function(c){n({a:c.left})},onKey:function(c){n({a:$(r.a+c.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},i.createElement(Y,{className:"react-colorful__alpha-pointer",left:r.a,color:G(r)})))},we=function(e){var t=e.className,r=e.colorModel,n=e.color,o=n===void 0?r.defaultColor:n,a=e.onChange,s=W(e,["className","colorModel","color","onChange"]),c=l.useRef(null);ie(c);var f=le(r,o,a),u=f[0],d=f[1],C=H(["react-colorful",t]);return i.createElement("div",k({},s,{ref:c,className:C}),i.createElement(ce,{hsva:u,onChange:d}),i.createElement(ue,{hue:u.h,onChange:d}),i.createElement(Fe,{hsva:u,onChange:d,className:"react-colorful__last-control"}))},He={defaultColor:{r:0,g:0,b:0,a:1},toHsva:se,fromHsva:ae,equal:J},Se=function(e){return i.createElement(we,k({},e,{colorModel:He}))};const Re=({value:e,isAllowAlpha:t,height:r,width:n})=>{const o=l.useMemo(()=>F(e,t),[e]);return g.jsxs("div",{style:{position:"relative"},children:[g.jsx("div",{className:"global-radius",style:{position:"absolute",height:r??"31.6px",width:n??"31.6px",backgroundColor:t?`rgba(${o.r},${o.g},${o.b},${o.a})`:`rgb(${o.r},${o.g},${o.b})`}}),g.jsx("div",{className:"global-radius checkered-background",style:{height:r??"31.6px",width:n??"31.6px"}})]})},Oe=({className:e,shape:t,value:r="",onChange:n,initMode:o,onModeChange:a,isAllowAlpha:s=!1})=>{const{globalShape:c,appTheme:f}=l.useContext(ve),[u,d]=l.useState(r?F(r,s):{r:0,g:0,b:0,a:1}),[C,S]=l.useState(o??"hex"),[L,N]=l.useState(`${u.r}`),[I,v]=l.useState(!1),[m,x]=l.useState(`${u.g}`),[E,R]=l.useState(!1),[O,D]=l.useState(`${u.g}`),[fe,V]=l.useState(!1),[pe,z]=l.useState(`${(u.a*100).toFixed(0)}`),[de,Q]=l.useState(!1),[Z,T]=l.useState(j(u,s)),[ge,A]=l.useState(!1),he=l.useCallback(ee.debounce(p=>{ge||T(j(p,s)),I||N(`${p.r}`),E||x(`${p.g}`),fe||D(`${p.b}`),de||z(`${(p.a*100).toFixed(0)}`)},10),[T,N,x]),me=l.useCallback(ee.debounce((p,b)=>{n&&n(j(p,b))},300),[n]);return l.useEffect(()=>{he(u),me(u,s)},[JSON.stringify(u)]),l.useEffect(()=>{r&&r!==j(u,s)&&d(F(r,s))},[r]),g.jsxs("div",{className:xe("color-picker",t||c,f.globalTheme,e),children:[g.jsx("div",{style:{padding:"12px"},children:s?g.jsx(Se,{className:"color-picker-box",color:u,onChange:d}):g.jsx(Me,{className:"color-picker-box",color:j(u,s),onChange:p=>d(F(p,s))})}),g.jsxs("div",{className:"color-input-box",children:[g.jsx("div",{style:{marginTop:"var(--space-25)"},children:g.jsx(Re,{value:Z,isAllowAlpha:s})}),g.jsxs("div",{style:{flexGrow:"1"},children:[C==="hex"&&g.jsx(M,{className:"hex-input",type:"text",value:Z,onChange:p=>{T(p)},onFocus:()=>{A(!0)},onBlur:(p,b)=>{A(!1),(s?/^#([0-9A-F]{3}|[0-9A-F]{6}|[0-9A-F]{8})$/i:/^#([0-9A-F]{3}|[0-9A-F]{6})$/i).test(b)?d(F(b,s)):setTimeout(()=>{T(j(u,s))},600)},config:{isHideClear:!0}}),C==="rgb"&&g.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"var(--space-100)"},children:[g.jsx(M,{className:"rgba-input",type:"number-text",value:L,onChange:p=>{N(p)},onFocus:()=>{v(!0)},onBlur:(p,b)=>{v(!1);const _=parseInt(b);_<=255?d(y=>({...y,r:_})):setTimeout(()=>{N(`${u.r}`)},600)},config:{prefixElement:"R",isHideClear:!0,maxLength:3}}),g.jsx(M,{className:"rgba-input",type:"number-text",value:m,onChange:p=>{x(p)},onFocus:()=>{R(!0)},onBlur:(p,b)=>{R(!1);const _=parseInt(b);_<=255?d(y=>({...y,g:_})):setTimeout(()=>{x(`${u.g}`)},600)},config:{prefixElement:"G",isHideClear:!0,maxLength:3}}),g.jsx(M,{className:"rgba-input",type:"number-text",value:O,onChange:p=>{D(p)},onFocus:()=>{V(!0)},onBlur:(p,b)=>{V(!1);const _=parseInt(b);_<=255?d(y=>({...y,b:_})):setTimeout(()=>{D(`${u.b}`)},600)},config:{prefixElement:"B",isHideClear:!0,maxLength:3}}),s&&g.jsx(M,{className:"rgba-input",type:"number-text",value:pe,onChange:p=>{z(p)},onFocus:()=>{Q(!0)},onBlur:(p,b)=>{Q(!1);const _=parseInt(b);_<=225?d(y=>({...y,a:_/100})):setTimeout(()=>{z(`${(u.a*100).toFixed(0)}`)},600)},config:{prefixElement:"A",sufixElement:"%",isHideClear:!0,maxLength:3}})]})]}),g.jsx("div",{style:{maxWidth:"100%"},children:g.jsx(be,{className:"toggle-mode-button",icon:g.jsx(_e,{}),txtLabel:"input mode",isShowtooltip:!1,appearance:"subtle",onClick:()=>{S(C==="hex"?"rgb":"hex"),a&&a(C==="hex"?"rgb":"hex")}})})]})]})};export{Oe as C,Re as a,F as h};
