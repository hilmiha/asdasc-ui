import{r as v,G,Z as M,j as o,E as L,D as H,a2 as X,I as _,$ as q,a0 as D,T as J,g as U}from"./index-BIzDLPgR.js";import{g as R}from"./helper-D8J10eng.js";import{T as Z}from"./index-DUpTH5v0.js";const T=r=>{setTimeout(()=>{r.current?.click()},100)},z=(r,a,e,i)=>{if(!r)return[];let n=[...r].filter(l=>!a.includes(l.txtLabel));return e&&(n=n.filter(l=>`${l.txtLabel}${l.alias}`.toLowerCase().includes(e.toLowerCase()))),i?.maxValue&&a.length>=i?.maxValue?n.map(l=>a.includes(l.id)?l:{...l,isDisabled:!0}):n},C=(r,a,e,i)=>{e(r,a,i)},K=(r,a)=>{a({isError:!1,errorMessage:""},r)},w=(r,a,e)=>{let i=!1,n="";e.isRequired&&!i&&r.length===0&&(i=!0,n="This field cannot be empty!"),e.maxValue&&!i&&r.length>e.maxValue&&(i=!0,n=`Value selected cannot exceed ${R(`${e.maxValue}`)} items`),e.minValue&&!i&&r.length<e.minValue&&(i=!0,n=`Value must be at least ${R(`${e.minValue}`)} items`),a({isError:i,errorMessage:n},r)},Q=(r,a,e,i,n,l,u,c,t,s,x)=>{let d=[...e];const N=a.txtLabel;d.includes(N)?d=d.filter(h=>h!=N):d.push(N),c?.maxValue&&d.length>c.maxValue&&(d=[...e]),t&&C(d,N,t,r),x&&s?.isError&&K(d,x),l||u(!0),i(""),n.current?.focus()},Y=(r,a,e,i,n,l,u,c,t,s)=>{const x=r.target.value;let d=x;switch(e){case"text-no-space":d=x.replace(/\s/g,"");break;case"text":default:d=x;break}x===" "?T(a):(d&&!u&&T(a),c(d)),s&&t?.isError&&K(i,s),n||l(!0)},ee=(r,a,e,i,n,l,u,c,t,s,x)=>{u.length===0&&i!==""&&(n(""),l&&a.current?.click()),x&&s&&c&&(!l||l&&u.length===0)&&w(e,x,s),t&&t(r,e)},te=(r,a,e)=>{e&&e(r,a)},se=(r,a,e,i,n,l,u,c)=>{const t=r.key;if(t==="Backspace"&&e===""&&n.length>0){const s=[...n];s.pop(),l&&(c&&u?.maxValue&&w(s,c,u),C(s,void 0,l,r))}if(t==="Enter"&&e==="")T(a);else if(t==="Enter"&&e!==""){const s=[...n],x=e.trim();if(!s.includes(x)){s.push(x),c&&u?.maxValue&&w(s,c,u);let d=!0;u?.maxValue&&u?.maxValue<s.length&&(d=!1),l&&d&&C(s,x,l,r)}i("")}},re=(r,a,e,i,n,l,u,c)=>{const t=[...e].filter(s=>s!==a);l&&C(t,void 0,l,r),c&&u&&w(t,c,u),i||n(!0)},le=(r,a,e,i,n,l,u)=>{n&&C([],void 0,n,r),u&&l&&w([],u,l),a?.current&&a.current.focus(),e||i(!0)},oe=({id:r=void 0,className:a=void 0,shape:e=void 0,afterElement:i=void 0,beforeElement:n=void 0,type:l="text-no-space",txtPlaceholder:u=void 0,options:c=[],value:t=[],isDisabled:s=!1,onChange:x=void 0,onBlur:d=void 0,onFocus:N=void 0,error:h=void 0,onValidate:j=void 0,config:m=void 0})=>{const{globalShape:P}=v.useContext(G),[E,S]=v.useState(!1),[W,V]=v.useState(!1),[y,I]=v.useState(""),k=M(()=>z(c,t,y,m),[c,t,y,m?.maxValue]),A=M(()=>t.map(p=>o.jsx(Z,{className:"input-tag-tag",txtLabel:p,onClickRemove:s?void 0:g=>{re(g,p,t,E,S,x,m,j)},style:{removeButton:{button:{pointerEvents:"all"}},textLabel:{pointerEvents:"all"}},isDisabled:s},p)),[t,s]);v.useEffect(()=>{!W&&j&&m&&E&&w(t,j,m)},[JSON.stringify(t)]);const b=v.useRef(null),[B,F]=v.useState(!1),O=(p,g)=>o.jsxs("div",{className:L("input-tag-container",e||P,{disabled:s,error:h?.isError,selected:B&&k.length>0},a),children:[m?.prefixElement&&o.jsx("div",{className:"prefix-box",children:m?.prefixElement}),o.jsxs("div",{className:"input-tag-input",children:[t.length>0&&A,!s&&o.jsx("input",{...g??{},ref:p,placeholder:u,className:"input-tag",enterKeyHint:"enter",value:y,onChange:f=>{s||Y(f,b,l,t,E,S,B,I,h,j)},onBlur:f=>{s||ee(f,b,t,y,I,B,k,E,d,m,j),V(!1)},onFocus:f=>{s||te(f,t,N),V(!0)},onKeyDown:f=>{se(f,b,y,I,t,x,m,j)}})]}),m?.sufixElement&&o.jsx("div",{className:"sufix-box",children:m?.sufixElement}),t.length>0&&!s&&!m?.isHideClear&&o.jsx(_,{className:"clear-button",icon:o.jsx(q,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:f=>{le(f,b,E,S,x,m,j)}}),s?o.jsx("div",{className:"lock-box",children:o.jsx(D,{className:"global-icon"})}):c.length!==0?o.jsx("div",{className:"caret-box",onClick:()=>{b.current?.focus()},children:B?o.jsx(J,{className:"global-icon"}):o.jsx(U,{className:"global-icon"})}):o.jsx(o.Fragment,{})]});return o.jsxs("div",{className:L("input-tag-box"),children:[o.jsxs("select",{style:{display:"none"},id:r,value:t,multiple:!0,disabled:!0,children:[o.jsx("option",{value:""}),t.map(p=>o.jsx("option",{value:p,children:p},p))]}),c.length===0||s?O(b):o.jsx(H,{className:L("input-tag-dropdown"),trigger:(p,g,f,$)=>($.current&&(b.current=$.current),O(p,{...g?.()??{}})),options:k,optionSelected:t,shape:e,style:{optionButton:{textLabel:{fontWeight:"var(--font-weight-normal)"}},container:{display:k.length===0?"none":void 0}},onClick:(p,g,f)=>{s||Q(f,g,t,I,b,E,S,m,x,h,j)},onOpen:()=>{F(!0)},onClose:()=>{F(!1)},floatingConfig:{isContainerWidthSameAsTrigger:!0,isLockScroll:k.length!==0,isShowDropdown:k.length!==0,mode:["dropdown"]}}),n&&o.jsx("div",{className:"before-element-box",children:n}),i&&o.jsx("div",{className:"after-element-box",children:i}),h&&h.isError&&h.errorMessage&&o.jsxs("div",{className:"error-box",children:[o.jsx(X,{className:"global-icon"}),o.jsx("p",{children:h.errorMessage})]})]})};export{oe as I};
