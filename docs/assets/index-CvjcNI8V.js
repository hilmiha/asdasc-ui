import{r as p,G as U,$ as E,j as e,F as D,D as q,a8 as z,a9 as H,f as J,I as K,a1 as X,a2 as _,U as Q,g as Y,a0 as Z}from"./index-BiVYdiuu.js";import{g as F}from"./helper-D8J10eng.js";import{I as ee}from"./index-D-e7AKBW.js";const se=(l,r)=>l.map(t=>{const s=r.find(a=>a.id===t);return s?{txtLabel:s.txtLabel,icon:s.icon}:{txtLabel:t,icon:void 0}}),te=(l,r,t,s)=>{let a=[...r];return t&&(a=a.filter(d=>`${d.txtLabel}${d.alias}`.toLowerCase().includes(t.toLowerCase()))),s&&l.length>=s?a.map(d=>l.includes(d.id)?d:{...d,isDisabled:!0}):a},T=(l,r,t,s)=>{t(l,r,s)},le=(l,r)=>{r({isError:!1,errorMessage:""},l)},y=(l,r,t)=>{let s=!1,a="";t.isRequired&&!s&&l.length===0&&(s=!0,a="This field cannot be empty!"),t.maxValue&&!s&&l.length>t.maxValue&&(s=!0,a=`Value selected cannot exceed ${F(`${t.maxValue}`)} items`),t.minValue&&!s&&l.length<t.minValue&&(s=!0,a=`Value must be at least ${F(`${t.minValue}`)} items`),r({isError:s,errorMessage:a},l)},re=(l,r,t,s,a,d,x,C,u,n)=>{let c=[...t];s==="multiple"?t.includes(r.id)?c=c.filter(g=>g!=r.id):c.push(r.id):c=[r.id],x?.maxValue&&c.length>x.maxValue&&(c=[...t]),C&&T(c,r,C,l),n&&u?.isError&&le(c,n),a||d(!0)},$=(l,r)=>{r&&T([],void 0,r,l)},ae=(l,r,t,s,a,d,x)=>{l.stopPropagation(),a&&$(l,a),d&&s&&y([],d,s),x?.current&&x.current.focus(),r||t(!0)},ce=({id:l=void 0,className:r=void 0,style:t=void 0,shape:s=void 0,afterElement:a=void 0,beforeElement:d=void 0,type:x="single",txtPlaceholder:C=void 0,option:u=[],value:n=[],isDisabled:c=!1,isLoading:g=!1,onChange:v=void 0,error:b=void 0,onValidate:m=void 0,triggerValidate:w=0,config:i=void 0})=>{const{globalShape:R}=p.useContext(U),[B,I]=p.useState(!1),[S,P]=p.useState(!1),[k,O]=p.useState(""),V=E(()=>{const o=se(n,u);return e.jsx(e.Fragment,{children:o.map((h,f)=>e.jsxs("span",{className:"value-label-text",style:{whiteSpace:"pre"},children:[x==="single"&&h.icon,h.txtLabel,f+1!==o.length?",":""]},h.txtLabel))})},[n,u]),M=E(()=>te(n,u,k,i?.maxValue),[u,n,k,i?.maxValue]),N=p.useRef(null),G=p.useRef(null),W=E(()=>u.filter(o=>o.type==="option"),[u]);return p.useEffect(()=>{!B&&m&&i&&S&&y(n,m,i)},[JSON.stringify(n)]),p.useEffect(()=>{w===1&&!B&&m&&i&&y(n,m,i)},[w]),e.jsxs("div",{className:D("input-selection-box",{open:B}),children:[e.jsxs("select",{style:{display:"none"},id:l,value:x==="multiple"?n:n.length>0?n[0]:"",multiple:x==="multiple",disabled:!0,children:[e.jsx("option",{value:""}),W.filter(o=>o.type==="option").map(o=>e.jsx("option",{value:o.id,children:o.txtLabel},o.id))]}),e.jsx(q,{className:"input-select-dropdown",isDisabled:c,isLoading:g,trigger:(o,h,f,L)=>(L.current&&(N.current=L.current),e.jsxs("div",{ref:o,...h?.()??{},role:"button",tabIndex:c?-1:0,id:l,className:D("input-selection",s||R,{disabled:c,selected:f,error:b?.isError},r),style:t?.triggerButton,onKeyDown:j=>{const A=!j.target.classList.contains("clear-button");(j.keyCode===13||j.keyCode===32)&&A&&(j.preventDefault(),N.current||(N.current=L.current),N.current?.click())},children:[i?.prefixElement&&e.jsx("div",{className:"prefix-box",children:i?.prefixElement}),e.jsx("div",{className:"value-label-box",children:n.length>0?e.jsx(e.Fragment,{children:V}):e.jsx("span",{className:"placeholder",children:C})}),i?.sufixElement&&e.jsx("div",{className:"sufix-box",children:i?.sufixElement}),n.length>0&&!c&&i?.isShowInlineClear&&e.jsx(K,{className:"clear-button",icon:e.jsx(X,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:j=>{ae(j,S,P,i,v,m,N)}}),c?e.jsx("div",{className:"lock-box",children:e.jsx(_,{className:"global-icon"})}):e.jsx("div",{className:"caret-box",children:f?e.jsx(Q,{className:"global-icon"}):e.jsx(Y,{className:"global-icon"})})]})),options:M,optionSelected:n,optionSelectedAppearance:"appear-selected",shape:s,style:t?.dropdownMenu,onClick:(o,h,f)=>{c||re(f,h,n,x,S,P,i,v,b,m)},onOpen:()=>{I(!0)},onClose:()=>{I(!1),O(""),S&&m&&i&&y(n,m,i)},elementHeader:i?.isCombobox||i?.isShowOptionBoxClear?e.jsxs(e.Fragment,{children:[i?.isCombobox?e.jsx("div",{className:"search-bar-box",children:e.jsx(ee,{ref:G,type:"text",txtPlaceholder:"Search...",value:k,onChange:o=>{O(o)},config:{prefixElement:e.jsx(H,{className:"global-icon"})}})}):void 0,i?.isShowOptionBoxClear&&e.jsx("div",{className:"reset-box",children:e.jsx(J,{shape:"box",className:"reset-button",txtLabel:"Clear Selection",appearance:"subtle",onClick:o=>{v&&$(o,v)}})})]}):void 0,elementFooter:k&&M.length===0&&u.length>0?e.jsxs("div",{className:"empty-box",children:[e.jsx(z,{className:"global-icon",size:32}),e.jsxs("div",{children:[e.jsx("span",{children:"No result."}),e.jsx("span",{children:"Try other search param!"})]})]}):void 0,floatingConfig:{isLockScroll:!0,isContainerWidthSameAsTrigger:!0,isWithCheckmark:x==="multiple",isCloseOnItemClicked:x==="single"}}),d&&e.jsx("div",{className:"before-element-box",children:d}),a&&e.jsx("div",{className:"after-element-box",children:a}),b&&b.isError&&b.errorMessage&&e.jsxs("div",{className:"error-box",children:[e.jsx(Z,{className:"global-icon"}),e.jsx("p",{children:b.errorMessage})]})]})};export{ce as I};
