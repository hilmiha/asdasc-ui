import{r as a,G as $,j as e,ah as I,c as N,f as G,d as W,am as q,I as R,an as z,ao as D,P as H,a as K,ap as X,H as _}from"./index-DgfOwETY.js";import{C as L,a as J,h as Q}from"./index-DXddU5LK.js";const T=(o,i)=>{i(o)},Y=(o,i,n,s,l)=>{s&&T(o,s),l&&l({isError:!1,errorMessage:""},o),i||n(!0)},P=(o,i,n)=>{let s=!1,l="";n.isRequired&&!s&&(o||(s=!0,l="This field cannot be empty!")),i({isError:s,errorMessage:l},o)},Z=o=>{o&&T("",o)},O=(o,i,n,s,l,u,c)=>{o.stopPropagation(),l&&Z(l),u&&s&&P("",u,s),c?.current&&c.current.focus(),i||n(!0)},V=({mode:o,setMode:i,className:n,trigger:s,style:l=void 0,shape:u=void 0,isDisabled:c=!1,value:t,config:m,onColorChange:b,onClose:h,onOpen:p,elementHeader:r=void 0,elementFooter:A=void 0,floatingConfig:v=void 0,bottomSheetOpen:j,setBottomSheetOpen:f})=>{const{screenSize:w}=a.useContext($),g=a.useRef(null),k=a.useMemo(()=>s?typeof s=="function"?e.jsx(e.Fragment,{children:I.cloneElement(s(void 0,void 0,j,g),{ref:g,onClick:()=>{c||f(!j)},disabled:c})}):e.jsx("div",{className:N("bottom-sheet-trigger-box"),style:l?.triggerBox,children:I.cloneElement(s,{ref:g,onClick:()=>{c||f(!j)},disabled:c})}):e.jsx(e.Fragment,{}),[s,c,j]),[E,M]=a.useState(0);return a.useEffect(()=>{f(!1)},[w]),w!=="mobile"||v?.mode?.length===1&&v.mode.includes("dropdown")?e.jsx(G,{className:N("input-color-dropdown",n),trigger:s,elementHeader:r,elementFooter:A,onClose:h,onOpen:p,isDisabled:c,triggerClose:E,floatingConfig:v,shape:u,style:{container:l?.container,triggerBox:l?.triggerBox},children:e.jsx(L,{className:"drodown-color-picker",initMode:o,isAllowAlpha:m?.isAllowAlpha,value:t,onChange:d=>{b&&b(d)},onModeChange:d=>{i(d)},shape:u})}):e.jsxs(e.Fragment,{children:[k,e.jsx(W,{isOpen:j,setIsOpen:f,className:N("input-color-bottom-sheet",n),elementHeader:r,elementFooter:A,onClose:h,onOpen:p,floatingConfig:{...v,defaultSnapPoint:"FULL"},shape:u,style:{container:l?.container,triggerBox:l?.triggerBox},children:e.jsx(L,{initMode:o,isAllowAlpha:m?.isAllowAlpha,value:t,onChange:d=>{b&&b(d)},onModeChange:d=>{i(d)},shape:u})})]})},re=({id:o=void 0,className:i=void 0,style:n=void 0,shape:s=void 0,afterElement:l=void 0,beforeElement:u=void 0,txtPlaceholder:c=void 0,value:t="",isDisabled:m=!1,onChange:b=void 0,error:h=void 0,onValidate:p=void 0,config:r=void 0})=>{const{globalShape:A}=a.useContext($),[v,j]=a.useState(!1),[f,w]=a.useState(!1),[g,k]=a.useState("hex"),E=q(()=>{if(g==="rgb"){const x=Q(t,r?.isAllowAlpha);return`${r?.isAllowAlpha?"rgba(":"rgb("}${x.r}, ${x.g}, ${x.b}${r?.isAllowAlpha?`, ${x.a.toFixed(2)})`:")"}`}else return t},[t,g]),[M,d]=a.useState(!1),B=a.useRef(null);return a.useEffect(()=>{!v&&p&&r&&f&&P(t,p,r)},[t]),e.jsxs("div",{className:N("input-color-box",{open:v}),children:[e.jsx(V,{mode:g,setMode:k,isDisabled:m,trigger:(x,F,S,y)=>(y.current&&(B.current=y.current),e.jsxs("div",{ref:x,...F?.()??{},role:"button",tabIndex:m?-1:0,id:o,className:N("input-color",s||A,{disabled:m,selected:S,error:h?.isError},i),style:n?.triggerButton,onKeyDown:C=>{const U=!C.target.classList.contains("clear-button");(C.keyCode===13||C.keyCode===32)&&U&&(C.preventDefault(),B.current?.click())},children:[r?.prefixElement&&e.jsx("div",{className:"prefix-box",children:r?.prefixElement}),e.jsx("div",{className:"value-label-box",children:t?e.jsx("p",{className:"value-label",children:E}):e.jsx("span",{className:"placeholder",children:c})}),r?.sufixElement&&e.jsx("div",{className:"sufix-box",children:r?.sufixElement}),t&&!m&&!r?.isHideClear&&e.jsx(R,{className:"clear-button",icon:e.jsx(z,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:C=>{O(C,f,w,r,b,p,B)}}),m?e.jsx("div",{className:"lock-box",children:e.jsx(D,{className:"global-icon"})}):e.jsx("div",{className:"caret-box",children:S?e.jsx(H,{className:"global-icon"}):e.jsx(K,{className:"global-icon"})})]})),shape:s,style:n?.dropdownMenu,value:t,config:r,onColorChange:x=>{m||Y(x,f,w,b,p)},onOpen:()=>{j(!0)},onClose:()=>{j(!1),f&&p&&r&&P(t,p,r)},bottomSheetOpen:M,setBottomSheetOpen:d,floatingConfig:{isLockScroll:!0,isContainerWidthSameAsTrigger:!1}}),e.jsxs("div",{className:"before-element-box",children:[e.jsx("div",{style:{margin:"var(--space-50)"},onClick:()=>{B.current?.click(),d(!0)},children:e.jsx(J,{value:t,isAllowAlpha:r?.isAllowAlpha,height:"28px",width:"28px"})}),u]}),e.jsxs("div",{className:"after-element-box",children:[e.jsx(R,{icon:e.jsx(X,{className:"global-icon"}),txtLabel:"Chane mode",onClick:()=>{k(x=>x==="rgb"?"hex":"rgb")}}),l]}),h&&h.isError&&h.errorMessage&&e.jsxs("div",{className:"error-box",children:[e.jsx(_,{className:"global-icon"}),e.jsx("p",{children:h.errorMessage})]})]})};export{re as I};
