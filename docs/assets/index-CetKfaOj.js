import{r as m,G as $,j as s,ah as A,i as y,D as _,B as z,am as G,I as W,an as Y,ao as q,ag as J,h as K,F as U}from"./index-u7RRe44t.js";import{l as F}from"./index-DbTcoJ-H.js";import{g as R}from"./helper-D8J10eng.js";import{n as X,d as Q,i as C,f as S,C as L}from"./index-BoPFxCqi.js";function O(t,e,o){const[r,a]=X(o?.in,t,e),i=P(r,a),n=Math.abs(Q(r,a));r.setDate(r.getDate()-i*n);const l=+(P(r,a)===-i),d=i*(n-l);return d===0?0:d}function P(t,e){const o=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return o<0?-1:o>0?1:o}const Z=(t,e)=>{if(t==="single"&&F.isDate(e))return S(e,"dd MMM yyyy");if(t==="single-with-time"&&F.isDate(e))return S(e,"dd MMM yyyy, HH:mm:ss");if(t==="multiple"&&e&&Array.isArray(e))return e.map(r=>S(r,"dd MMM yyyy")).join(", ");if(t==="range"&&e&&C(e)){const o=e.from,r=e.to;return o&&r?`${S(o,"dd MMM yyyy")} to ${S(r,"dd MMM yyyy")}`:""}else return""},w=(t,e)=>{e(t)},k=(t,e,o,r)=>{let a=!1,i="";if(r.isRequired&&!a&&(e||(a=!0,i="This field cannot be empty!")),r.minSelected&&!a&&(t==="multiple"||t==="range")){let n=0;t==="multiple"&&e&&Array.isArray(e)&&(n=e.length),t==="range"&&e&&C(e)&&e.from&&e.to&&(n=O(e.to,e.from)+1),n<r.minSelected&&(a=!0,i=`Value must be at least ${R(`${r.minSelected}`)} items`)}if(r.maxSelected&&!a&&(t==="multiple"||t==="range")){let n=0;t==="multiple"&&e&&Array.isArray(e)&&(n=e.length),t==="range"&&e&&C(e)&&e.from&&e.to&&(n=O(e.to,e.from)+1),n>r.maxSelected&&(a=!0,i=`Value selected cannot exceed ${R(`${r.maxSelected}`)} items`)}o({isError:a,errorMessage:i},e)},V=t=>{t&&w(void 0,t)},ee=(t,e,o,r,a,i,n,l)=>{t.stopPropagation(),i&&V(i),n&&a&&k(e,void 0,n,a),l?.current&&l.current.focus(),o||r(!0)},te=({type:t,className:e,trigger:o,style:r=void 0,shape:a=void 0,isDisabled:i=!1,value:n,config:l,onCalendarChange:d,onClose:f,onOpen:b,elementHeader:x=void 0,elementFooter:u=void 0,floatingConfig:c=void 0})=>{const{screenSize:N}=m.useContext($),[p,g]=m.useState(!1),h=m.useRef(null),B=m.useMemo(()=>o?typeof o=="function"?s.jsx(s.Fragment,{children:A.cloneElement(o(void 0,void 0,p,h),{ref:h,onClick:()=>{i||g(!p)},disabled:i})}):s.jsx("div",{className:y("bottom-sheet-trigger-box"),style:r?.triggerBox,children:A.cloneElement(o,{ref:h,onClick:()=>{i||g(!p)},disabled:i})}):s.jsx(s.Fragment,{}),[o,i,p]),[E,v]=m.useState(0);return m.useEffect(()=>{g(!1)},[N]),N!=="mobile"||c?.mode?.length===1&&c.mode.includes("dropdown")?s.jsx(_,{className:y("input-date-dropdown",e),trigger:o,elementHeader:x,elementFooter:u,onClose:f,onOpen:b,isDisabled:i,triggerClose:E,floatingConfig:c,shape:a,style:{container:r?.container,triggerBox:r?.triggerBox},children:s.jsx(L,{type:t,value:n,onChange:j=>{d&&d(j)},calendarStart:l?.calendarStart,calendarEnd:l?.calendarEnd,disabledDates:l?.disabledDates,isDisabled:i})}):s.jsxs(s.Fragment,{children:[B,s.jsx(z,{isOpen:p,setIsOpen:g,className:y("input-date-bottom-sheet",e),elementHeader:x,elementFooter:u,onClose:f,onOpen:b,floatingConfig:c,shape:a,style:{container:r?.container,triggerBox:r?.triggerBox},children:s.jsx(L,{type:t,value:n,onChange:j=>{d&&d(j)},calendarStart:l?.calendarStart,calendarEnd:l?.calendarEnd,disabledDates:l?.disabledDates,isDisabled:i})})]})},ne=({id:t=void 0,className:e=void 0,style:o=void 0,shape:r=void 0,afterElement:a=void 0,beforeElement:i=void 0,type:n="single",txtPlaceholder:l=void 0,value:d=void 0,isDisabled:f=!1,onChange:b=void 0,error:x=void 0,onValidate:u=void 0,config:c=void 0})=>{const{globalShape:N}=m.useContext($),[p,g]=m.useState(!1),[h,B]=m.useState(!1),E=G(()=>Z(n,d),[d]),v=m.useRef(null);return m.useEffect(()=>{!p&&u&&c&&h&&k(n,d,u,c)},[JSON.stringify(d)]),s.jsxs("div",{className:y("input-date-box",{open:p}),children:[s.jsx(te,{type:n,isDisabled:f,trigger:(j,H,I,D)=>(D.current&&(v.current=D.current),s.jsxs("div",{ref:j,...H?.()??{},role:"button",tabIndex:f?-1:0,id:t,className:y("input-date",r||N,{disabled:f,selected:I,error:x?.isError},e),style:o?.triggerButton,onKeyDown:M=>{const T=!M.target.classList.contains("clear-button");(M.keyCode===13||M.keyCode===32)&&T&&(M.preventDefault(),v.current?.click())},children:[c?.prefixElement&&s.jsx("div",{className:"prefix-box",children:c?.prefixElement}),s.jsx("div",{className:"value-label-box",children:d?s.jsx("p",{className:"value-label",children:E}):s.jsx("span",{className:"placeholder",children:l})}),c?.sufixElement&&s.jsx("div",{className:"sufix-box",children:c?.sufixElement}),d&&!f&&!c?.isHideClear&&s.jsx(W,{className:"clear-button",icon:s.jsx(Y,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:M=>{ee(M,n,h,B,c,b,u,v)}}),f?s.jsx("div",{className:"lock-box",children:s.jsx(q,{className:"global-icon"})}):s.jsx("div",{className:"caret-box",children:I?s.jsx(J,{className:"global-icon"}):s.jsx(K,{className:"global-icon"})})]})),shape:r,style:o?.dropdownMenu,value:d,config:c,onCalendarChange:j=>{f||(b&&b(j),h||B(!0))},onOpen:()=>{g(!0)},onClose:()=>{g(!1),h&&u&&c&&k(n,d,u,c)},floatingConfig:{isLockScroll:!0,isContainerWidthSameAsTrigger:!1}}),i&&s.jsx("div",{className:"before-element-box",children:i}),a&&s.jsx("div",{className:"after-element-box",children:a}),x&&x.isError&&x.errorMessage&&s.jsxs("div",{className:"error-box",children:[s.jsx(U,{className:"global-icon"}),s.jsx("p",{children:x.errorMessage})]})]})};export{ne as I};
