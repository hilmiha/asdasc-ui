import{V as i,r as l,j as g,G as ve,F as xe,I as be,a3 as _e}from"./index-CnHM78Nl.js";import{I as F}from"./index-DqowIGhJ.js";import{l as ee}from"./index-DoHxCD7J.js";const M=(e,t)=>{const n=e.toLowerCase().replace("#",""),r=()=>n.split("").map(f=>parseInt(f+f,16));let o,a,s;if(n.length===3)[o,a,s]=r();else{const f=parseInt(n.slice(0,6),16);o=f>>16&255,a=f>>8&255,s=f&255}const c=t&&n.length===8?parseInt(n.slice(6,8),16)/255:1;return{r:o,g:a,b:s,a:c}},j=(e,t)=>{const n=o=>Math.round(o).toString(16).padStart(2,"0");if(!t||e.a===1)return`#${n(e.r)}${n(e.g)}${n(e.b)}`.toUpperCase();const r=Math.round(e.a*255);return`#${n(e.r)}${n(e.g)}${n(e.b)}${n(r)}`.toUpperCase()};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){if(e==null)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}function K(e){var t=l.useRef(e),n=l.useRef(function(r){t.current&&t.current(r)});return t.current=e,n.current}var $=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},w=function(e){return"touches"in e},q=function(e){return e&&e.ownerDocument.defaultView||self},te=function(e,t,n){var r=e.getBoundingClientRect(),o=w(t)?function(a,s){for(var c=0;c<a.length;c++)if(a[c].identifier===s)return a[c];return a[0]}(t.touches,n):t;return{left:$((o.pageX-(r.left+q(e).pageXOffset))/r.width),top:$((o.pageY-(r.top+q(e).pageYOffset))/r.height)}},ne=function(e){!w(e)&&e.preventDefault()},W=i.memo(function(e){var t=e.onMove,n=e.onKey,r=V(e,["onMove","onKey"]),o=l.useRef(null),a=K(t),s=K(n),c=l.useRef(null),f=l.useRef(!1),u=l.useMemo(function(){var L=function(v){ne(v),(w(v)?v.touches.length>0:v.buttons>0)&&o.current?a(te(o.current,v,c.current)):I(!1)},N=function(){return I(!1)};function I(v){var m=f.current,x=q(o.current),E=v?x.addEventListener:x.removeEventListener;E(m?"touchmove":"mousemove",L),E(m?"touchend":"mouseup",N)}return[function(v){var m=v.nativeEvent,x=o.current;if(x&&(ne(m),!function(H,O){return O&&!w(H)}(m,f.current)&&x)){if(w(m)){f.current=!0;var E=m.changedTouches||[];E.length&&(c.current=E[0].identifier)}x.focus(),a(te(x,m,c.current)),I(!0)}},function(v){var m=v.which||v.keyCode;m<37||m>40||(v.preventDefault(),s({left:m===39?.05:m===37?-.05:0,top:m===40?.05:m===38?-.05:0}))},I]},[s,a]),d=u[0],C=u[1],R=u[2];return l.useEffect(function(){return R},[R]),i.createElement("div",k({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:o,onKeyDown:C,tabIndex:0,role:"slider"}))}),S=function(e){return e.filter(Boolean).join(" ")},X=function(e){var t=e.color,n=e.left,r=e.top,o=r===void 0?.5:r,a=S(["react-colorful__pointer",e.className]);return i.createElement("div",{className:a,style:{top:100*o+"%",left:100*n+"%"}},i.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},h=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},Ce=function(e){return se(P(e))},P=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?h(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?h(parseInt(e.substring(6,8),16)/255,2):1}},Ee=function(e){return ye(ae(e))},oe=function(e){var t=e.s,n=e.v,r=e.a,o=(200-t)*n/100;return{h:h(e.h),s:h(o>0&&o<200?t*n/100/(o<=100?o:200-o)*100:0),l:h(o/2),a:h(r,2)}},U=function(e){var t=oe(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},G=function(e){var t=oe(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},ae=function(e){var t=e.h,n=e.s,r=e.v,o=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),s=r*(1-n),c=r*(1-(t-a)*n),f=r*(1-(1-t+a)*n),u=a%6;return{r:h(255*[r,c,s,s,f,r][u]),g:h(255*[f,r,r,c,s,s][u]),b:h(255*[s,s,f,r,r,c][u]),a:h(o,2)}},B=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},ye=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a=o<1?B(h(255*o)):"";return"#"+B(t)+B(n)+B(r)+a},se=function(e){var t=e.r,n=e.g,r=e.b,o=e.a,a=Math.max(t,n,r),s=a-Math.min(t,n,r),c=s?a===t?(n-r)/s:a===n?2+(r-t)/s:4+(t-n)/s:0;return{h:h(60*(c<0?c+6:c)),s:h(a?s/a*100:0),v:h(a/255*100),a:o}},ue=i.memo(function(e){var t=e.hue,n=e.onChange,r=S(["react-colorful__hue",e.className]);return i.createElement("div",{className:r},i.createElement(W,{onMove:function(o){n({h:360*o.left})},onKey:function(o){n({h:$(t+360*o.left,0,360)})},"aria-label":"Hue","aria-valuenow":h(t),"aria-valuemax":"360","aria-valuemin":"0"},i.createElement(X,{className:"react-colorful__hue-pointer",left:t/360,color:U({h:t,s:100,v:100,a:1})})))}),ce=i.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:U({h:t.h,s:100,v:100,a:1})};return i.createElement("div",{className:"react-colorful__saturation",style:r},i.createElement(W,{onMove:function(o){n({s:100*o.left,v:100-100*o.top})},onKey:function(o){n({s:$(t.s+100*o.left,0,100),v:$(t.v-100*o.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+h(t.s)+"%, Brightness "+h(t.v)+"%"},i.createElement(X,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:U(t)})))}),Y=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},Ne=function(e,t){return e.toLowerCase()===t.toLowerCase()||Y(P(e),P(t))};function le(e,t,n){var r=K(n),o=l.useState(function(){return e.toHsva(t)}),a=o[0],s=o[1],c=l.useRef({color:t,hsva:a});l.useEffect(function(){if(!e.equal(t,c.current.color)){var u=e.toHsva(t);c.current={hsva:u,color:t},s(u)}},[t,e]),l.useEffect(function(){var u;Y(a,c.current.hsva)||e.equal(u=e.fromHsva(a),c.current.color)||(c.current={hsva:a,color:u},r(u))},[a,e,r]);var f=l.useCallback(function(u){s(function(d){return Object.assign({},d,u)})},[]);return[a,f]}var Ie=typeof window<"u"?l.useLayoutEffect:l.useEffect,je=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},re=new Map,ie=function(e){Ie(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!re.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,re.set(t,n);var r=je();r&&n.setAttribute("nonce",r),t.head.appendChild(n)}},[])},$e=function(e){var t=e.className,n=e.colorModel,r=e.color,o=r===void 0?n.defaultColor:r,a=e.onChange,s=V(e,["className","colorModel","color","onChange"]),c=l.useRef(null);ie(c);var f=le(n,o,a),u=f[0],d=f[1],C=S(["react-colorful",t]);return i.createElement("div",k({},s,{ref:c,className:C}),i.createElement(ce,{hsva:u,onChange:d}),i.createElement(ue,{hue:u.h,onChange:d,className:"react-colorful__last-control"}))},ke={defaultColor:"000",toHsva:Ce,fromHsva:function(e){return Ee({h:e.h,s:e.s,v:e.v,a:1})},equal:Ne},Fe=function(e){return i.createElement($e,k({},e,{colorModel:ke}))},Me=function(e){var t=e.className,n=e.hsva,r=e.onChange,o={backgroundImage:"linear-gradient(90deg, "+G(Object.assign({},n,{a:0}))+", "+G(Object.assign({},n,{a:1}))+")"},a=S(["react-colorful__alpha",t]),s=h(100*n.a);return i.createElement("div",{className:a},i.createElement("div",{className:"react-colorful__alpha-gradient",style:o}),i.createElement(W,{onMove:function(c){r({a:c.left})},onKey:function(c){r({a:$(n.a+c.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},i.createElement(X,{className:"react-colorful__alpha-pointer",left:n.a,color:G(n)})))},we=function(e){var t=e.className,n=e.colorModel,r=e.color,o=r===void 0?n.defaultColor:r,a=e.onChange,s=V(e,["className","colorModel","color","onChange"]),c=l.useRef(null);ie(c);var f=le(n,o,a),u=f[0],d=f[1],C=S(["react-colorful",t]);return i.createElement("div",k({},s,{ref:c,className:C}),i.createElement(ce,{hsva:u,onChange:d}),i.createElement(ue,{hue:u.h,onChange:d}),i.createElement(Me,{hsva:u,onChange:d,className:"react-colorful__last-control"}))},Se={defaultColor:{r:0,g:0,b:0,a:1},toHsva:se,fromHsva:ae,equal:Y},Re=function(e){return i.createElement(we,k({},e,{colorModel:Se}))};const He=({value:e,isAllowAlpha:t,height:n,width:r})=>{const o=l.useMemo(()=>M(e,t),[e]);return g.jsxs("div",{style:{position:"relative"},children:[g.jsx("div",{className:"global-radius",style:{position:"absolute",height:n??"31.6px",width:r??"31.6px",backgroundColor:t?`rgba(${o.r},${o.g},${o.b},${o.a})`:`rgb(${o.r},${o.g},${o.b})`}}),g.jsx("div",{className:"global-radius checkered-background",style:{height:n??"31.6px",width:r??"31.6px"}})]})},Oe=({className:e,shape:t,value:n="",onChange:r,initMode:o,onModeChange:a,isAllowAlpha:s=!1})=>{const{globalShape:c,appTheme:f}=l.useContext(ve),[u,d]=l.useState(n?M(n,s):{r:0,g:0,b:0,a:1}),[C,R]=l.useState(o??"hex"),[L,N]=l.useState(`${u.r}`),[I,v]=l.useState(!1),[m,x]=l.useState(`${u.g}`),[E,H]=l.useState(!1),[O,D]=l.useState(`${u.g}`),[fe,J]=l.useState(!1),[pe,z]=l.useState(`${(u.a*100).toFixed(0)}`),[de,Q]=l.useState(!1),[Z,T]=l.useState(j(u,s)),[ge,A]=l.useState(!1),he=l.useCallback(ee.debounce(p=>{ge||T(j(p,s)),I||N(`${p.r}`),E||x(`${p.g}`),fe||D(`${p.b}`),de||z(`${(p.a*100).toFixed(0)}`)},10),[T,N,x]),me=l.useCallback(ee.debounce((p,b)=>{r&&r(j(p,b))},300),[r]);return l.useEffect(()=>{he(u),me(u,s)},[JSON.stringify(u)]),l.useEffect(()=>{n&&n!==j(u,s)&&d(M(n,s))},[n]),g.jsxs("div",{className:xe("color-picker",t||c,f.globalTheme,e),children:[g.jsx("div",{style:{padding:"12px"},children:s?g.jsx(Re,{className:"color-picker-box",color:u,onChange:d}):g.jsx(Fe,{className:"color-picker-box",color:j(u,s),onChange:p=>d(M(p,s))})}),g.jsxs("div",{className:"color-input-box",children:[g.jsx("div",{style:{marginTop:"var(--space-25)"},children:g.jsx(He,{value:Z,isAllowAlpha:s})}),g.jsxs("div",{style:{flexGrow:"1"},children:[C==="hex"&&g.jsx(F,{className:"hex-input",type:"text",value:Z,onChange:p=>{T(p)},onFocus:()=>{A(!0)},onBlur:(p,b)=>{A(!1),(s?/^#([0-9A-F]{3}|[0-9A-F]{6}|[0-9A-F]{8})$/i:/^#([0-9A-F]{3}|[0-9A-F]{6})$/i).test(b)?d(M(b,s)):setTimeout(()=>{T(j(u,s))},600)}}),C==="rgb"&&g.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"var(--space-100)"},children:[g.jsx(F,{className:"rgba-input",type:"number-text",value:L,onChange:p=>{N(p)},onFocus:()=>{v(!0)},onBlur:(p,b)=>{v(!1);const _=parseInt(b);_<=255?d(y=>({...y,r:_})):setTimeout(()=>{N(`${u.r}`)},600)},config:{prefixElement:"R",maxLength:3}}),g.jsx(F,{className:"rgba-input",type:"number-text",value:m,onChange:p=>{x(p)},onFocus:()=>{H(!0)},onBlur:(p,b)=>{H(!1);const _=parseInt(b);_<=255?d(y=>({...y,g:_})):setTimeout(()=>{x(`${u.g}`)},600)},config:{prefixElement:"G",maxLength:3}}),g.jsx(F,{className:"rgba-input",type:"number-text",value:O,onChange:p=>{D(p)},onFocus:()=>{J(!0)},onBlur:(p,b)=>{J(!1);const _=parseInt(b);_<=255?d(y=>({...y,b:_})):setTimeout(()=>{D(`${u.b}`)},600)},config:{prefixElement:"B",maxLength:3}}),s&&g.jsx(F,{className:"rgba-input",type:"number-text",value:pe,onChange:p=>{z(p)},onFocus:()=>{Q(!0)},onBlur:(p,b)=>{Q(!1);const _=parseInt(b);_<=225?d(y=>({...y,a:_/100})):setTimeout(()=>{z(`${(u.a*100).toFixed(0)}`)},600)},config:{prefixElement:"A",sufixElement:"%",maxLength:3}})]})]}),g.jsx("div",{style:{maxWidth:"100%"},children:g.jsx(be,{className:"toggle-mode-button",icon:g.jsx(_e,{}),txtLabel:"input mode",isShowtooltip:!1,appearance:"subtle",onClick:()=>{R(C==="hex"?"rgb":"hex"),a&&a(C==="hex"?"rgb":"hex")}})})]})]})};export{Oe as C,He as a,M as h};
