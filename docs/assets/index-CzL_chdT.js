import{r as C,$ as D,j as r,F as N,a0 as w,I as y,g as M,U as P,d as L,C as V}from"./index-DkxoG2XB.js";import{g as k}from"./helper-D8J10eng.js";const $=(e,l)=>{l(t=>{const s=new Set(t),a=e.id,o=F(e);return s.has(a)?(s.delete(a),o.forEach(c=>{s.delete(c)})):(s.add(a),o.forEach(c=>{s.add(c)})),s})},F=e=>!e.childOption||e.childOption.length===0?[]:e.childOption.filter(l=>l.childOption&&l.childOption.length>0).map(l=>l.id),p=e=>!e.childOption||e.childOption.length===0?[e.id]:e.childOption.flatMap(p),v=e=>!e.childOption||e.childOption.length===0?e.isDisabled?[e.id]:[]:e.childOption.flatMap(v),T=(e,l)=>{if(!e.childOption||e.childOption.length===0)return{checked:l.has(e.id),indeterminate:!1};const t=p(e),s=t.filter(a=>l.has(a)).length;return{checked:s===t.length,indeterminate:s>0&&s<t.length}},R=(e,l,t,s,a,o)=>{const c=new Set(t),h=p(e),d=v(e),m=h.filter(n=>c.has(n));h.forEach(n=>{l&&h.length-d.length!==m.length?c.add(n):c.delete(n)}),l&&d.forEach(n=>{c.delete(n)});const u=[...c];s&&s(u),a&&o&&S(u,a,o)},S=(e,l,t)=>{let s=!1,a="";t.isRequired&&!s&&e.length===0&&(s=!0,a="This field cannot be empty!"),t.maxValue&&!s&&e.length>t.maxValue&&(s=!0,a=`Value selected cannot exceed ${k(`${t.maxValue}`)} items`),t.minValue&&!s&&e.length<t.minValue&&(s=!0,a=`Value must be at least ${k(`${t.minValue}`)} items`),l({isError:s,errorMessage:a},e)},G=({className:e=void 0,style:l=void 0,options:t=[],selectedList:s=[],isDisabled:a=!1,isDefaultCollapse:o=!0,onChange:c=void 0,triggerValidate:h=0,error:d=void 0,onValidate:m=void 0,config:u=void 0})=>{const n=new Set(s),[g,I]=C.useState(new Set),E=D(()=>JSON.stringify(t).includes("childOption"),[t]),O=(i,B)=>{const f=T(i,n),j=i.childOption&&i.childOption.length>0,x=o?g.has(i.id):!g.has(i.id);return i.type==="separator"?null:r.jsxs("div",{className:"checkbox-tree-box",children:[r.jsxs("div",{className:"parent-box",children:[j?r.jsx(y,{appearance:"subtle",className:"collapse-button",onClick:()=>{$(i,I)},icon:x?r.jsx(M,{className:"global-icon"}):r.jsx(P,{className:"global-icon"}),txtLabel:x?"Expand Option":"Collapse Option",isShowtooltip:!1}):E?r.jsx(L,{className:"global-icon",color:"transparent",style:{margin:"calc(var(--space-0))"}}):r.jsx(r.Fragment,{}),r.jsx(V,{isSelected:f.checked&&!f.indeterminate,isIndeterminate:f.indeterminate,txtLabel:i.txtLabel,txtSublabel:i.txtSublabel,icon:i.icon,onClick:b=>R(i,b,n,c,m,u),isDisabled:a||i.isDisabled||B,style:l?.checkboxButton})]}),j&&r.jsx("div",{className:N("child-box",x?"closed":"opened"),children:r.jsx("div",{children:i.childOption.map(b=>O(b,x))})})]},i.id)};return C.useEffect(()=>{h===1&&m&&u&&S(s,m,u)},[h]),r.jsxs("div",{className:N("checkbox-group-container",{error:d?.isError},e),style:l?.container,children:[r.jsx("div",{style:l?.box,children:t.map(i=>O(i))}),d&&d.isError&&d.errorMessage&&r.jsxs("div",{className:"error-box",children:[r.jsx(w,{className:"global-icon"}),r.jsx("p",{children:d.errorMessage})]})]})};export{G as C};
