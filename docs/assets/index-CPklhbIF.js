import{r as i,G as F,j as e,V as R,F as k,t as W,u as q,$ as z,I as L,a1 as D,a2 as K,U as X,g as _,a3 as J,a0 as Q}from"./index-DkxoG2XB.js";import{C as $,a as Y,h as Z}from"./index-TpzWV7AL.js";const T=(o,a)=>{a(o)},H=(o,a,n,s,l)=>{s&&T(o,s),l&&l({isError:!1,errorMessage:""},o),a||n(!0)},M=(o,a,n)=>{let s=!1,l="";n.isRequired&&!s&&(o||(s=!0,l="This field cannot be empty!")),a({isError:s,errorMessage:l},o)},O=o=>{o&&T("",o)},V=(o,a,n,s,l,u,c)=>{o.stopPropagation(),l&&O(l),u&&s&&M("",u,s),c?.current&&c.current.focus(),a||n(!0)},ee=({mode:o,setMode:a,className:n,trigger:s,style:l=void 0,shape:u=void 0,isDisabled:c=!1,value:t,config:m,onColorChange:j,onClose:h,onOpen:d,elementHeader:g=void 0,elementFooter:r=void 0,floatingConfig:C=void 0,bottomSheetOpen:f,setBottomSheetOpen:b})=>{const{screenSize:v}=i.useContext(F),w=i.useRef(null),A=i.useMemo(()=>s?typeof s=="function"?e.jsx(e.Fragment,{children:R.cloneElement(s(void 0,void 0,f,w),{ref:w,onClick:()=>{c||b(!f)},disabled:c})}):e.jsx("div",{className:k("bottom-sheet-trigger-box"),style:l?.triggerBox,children:R.cloneElement(s,{ref:w,onClick:()=>{c||b(!f)},disabled:c})}):e.jsx(e.Fragment,{}),[s,c,f]),[B,P]=i.useState(0);return i.useEffect(()=>{b(!1)},[v]),v!=="mobile"||C?.mode?.length===1&&C.mode.includes("dropdown")?e.jsx(W,{className:k("input-color-dropdown",n),trigger:s,elementHeader:g,elementFooter:r,onClose:h,onOpen:d,isDisabled:c,triggerClose:B,floatingConfig:C,shape:u,style:{container:l?.container,triggerBox:l?.triggerBox},children:e.jsx($,{className:"drodown-color-picker",initMode:o,isAllowAlpha:m?.isAllowAlpha,value:t,onChange:p=>{j&&j(p)},onModeChange:p=>{a(p)},shape:u})}):e.jsxs(e.Fragment,{children:[A,e.jsx(q,{isOpen:f,setIsOpen:b,className:k("input-color-bottom-sheet",n),elementHeader:g,elementFooter:r,onClose:h,onOpen:d,floatingConfig:{...C,defaultSnapPoint:"FULL"},shape:u,style:{container:l?.container,triggerBox:l?.triggerBox},children:e.jsx($,{initMode:o,isAllowAlpha:m?.isAllowAlpha,value:t,onChange:p=>{j&&j(p)},onModeChange:p=>{a(p)},shape:u})})]})},oe=({id:o=void 0,className:a=void 0,style:n=void 0,shape:s=void 0,afterElement:l=void 0,beforeElement:u=void 0,txtPlaceholder:c=void 0,value:t="",isDisabled:m=!1,onChange:j=void 0,error:h=void 0,onValidate:d=void 0,triggerValidate:g=0,config:r=void 0})=>{const{globalShape:C}=i.useContext(F),[f,b]=i.useState(!1),[v,w]=i.useState(!1),[A,B]=i.useState("hex"),P=z(()=>{if(A==="rgb"){const x=Z(t,r?.isAllowAlpha);return`${r?.isAllowAlpha?"rgba(":"rgb("}${x.r}, ${x.g}, ${x.b}${r?.isAllowAlpha?`, ${x.a.toFixed(2)})`:")"}`}else return t},[t,A]),[p,S]=i.useState(!1),E=i.useRef(null);return i.useEffect(()=>{!f&&d&&r&&v&&M(t,d,r)},[t]),i.useEffect(()=>{g===1&&!f&&d&&r&&M(t,d,r)},[g]),e.jsxs("div",{className:k("input-color-box",{open:f}),children:[e.jsx(ee,{mode:A,setMode:B,isDisabled:m,trigger:(x,U,y,I)=>(I.current&&(E.current=I.current),e.jsxs("div",{ref:x,...U?.()??{},role:"button",tabIndex:m?-1:0,id:o,className:k("input-color",s||C,{disabled:m,selected:y,error:h?.isError},a),style:n?.triggerButton,onKeyDown:N=>{const G=!N.target.classList.contains("clear-button");(N.keyCode===13||N.keyCode===32)&&G&&(N.preventDefault(),E.current?.click())},children:[r?.prefixElement&&e.jsx("div",{className:"prefix-box",children:r?.prefixElement}),e.jsx("div",{className:"value-label-box",children:t?e.jsx("p",{className:"value-label",children:P}):e.jsx("span",{className:"placeholder",children:c})}),r?.sufixElement&&e.jsx("div",{className:"sufix-box",children:r?.sufixElement}),t&&!m&&r?.isShowClear&&e.jsx(L,{className:"clear-button",icon:e.jsx(D,{}),txtLabel:"Clear",appearance:"subtle",isShowtooltip:!1,onClick:N=>{V(N,v,w,r,j,d,E)}}),m?e.jsx("div",{className:"lock-box",children:e.jsx(K,{className:"global-icon"})}):e.jsx("div",{className:"caret-box",children:y?e.jsx(X,{className:"global-icon"}):e.jsx(_,{className:"global-icon"})})]})),shape:s,style:n?.dropdownMenu,value:t,config:r,onColorChange:x=>{m||H(x,v,w,j,d)},onOpen:()=>{b(!0)},onClose:()=>{b(!1),v&&d&&r&&M(t,d,r)},bottomSheetOpen:p,setBottomSheetOpen:S,floatingConfig:{isLockScroll:!0,isContainerWidthSameAsTrigger:!1}}),e.jsxs("div",{className:"before-element-box",children:[e.jsx("div",{style:{margin:"var(--space-50)"},onClick:()=>{E.current?.click(),S(!0)},children:e.jsx(Y,{value:t,isAllowAlpha:r?.isAllowAlpha,height:"28px",width:"28px"})}),u]}),e.jsxs("div",{className:"after-element-box",children:[e.jsx(L,{icon:e.jsx(J,{className:"global-icon"}),txtLabel:"Chane mode",onClick:()=>{B(x=>x==="rgb"?"hex":"rgb")}}),l]}),h&&h.isError&&h.errorMessage&&e.jsxs("div",{className:"error-box",children:[e.jsx(Q,{className:"global-icon"}),e.jsx("p",{children:h.errorMessage})]})]})};export{oe as I};
